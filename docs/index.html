<!DOCTYPE HTML>
<html>

<head>
  <meta charset="UTF-8">
  <meta NAME="ROBOTS" CONTENT="NOINDEX,NOFOLLOW">
  <meta http-equiv="Pragma" content="no-cache">
  <meta http-equiv="cache-control" content="no-cache">
  <meta http-equiv="expires" content="0">
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="format-detection" content="telephone=no">

  <meta name="viewport" content="initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0, user-scalable=no">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-touch-fullscreen" content="yes">
  <!-- CODELAB: Add link rel manifest -->
  <link rel="manifest" href="./manifest.json">
  <!-- CODELAB: Add iOS meta tags and icons -->
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black">
  <meta name="apple-mobile-web-app-title" content="電子回覧板">
  <link rel="apple-touch-icon" href="./images/android-chrome-152x152.png">
  <!-- CODELAB: Add meta theme-color -->
  <meta name="theme-color" content="#2F3BA2" />
  <style>
    .webix_el_box,
    .webix_cal_body .webix_cal_day_inner,
    .webix_cal_body .webix_cal_block,
    .webix_cal_month_name {
      font-size: 14pt !important;
    }
  </style>
  <script type="text/javascript">
    // CODELAB: Register service worker.
    if ("serviceWorker" in navigator) {
      window.addEventListener("load", () => {
        navigator.serviceWorker.register("service-worker.js")
          .then((reg) => {
            console.log("Service worker registered.", reg);
          });
      });
    }
  </script>
  <link rel="shortcut icon" href="favicon.ico">
  <link rel="stylesheet" href="//cdn.webix.com/edge/skins/flat.min.css" type="text/css">
  <link rel="stylesheet" href="//cdn.webix.com/materialdesignicons/5.8.95/css/materialdesignicons.min.css"
    type="text/css" charset="utf-8">
  <link rel="stylesheet" href="./libs/winmenu/winmenu.css" type="text/css">
  <script src="//cdn.webix.com/edge/webix.min.js" type="text/javascript"></script>
  <script src="./libs/winmenu/winmenu.js" type="text/javascript"></script>
  <script src="//cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
  <title>menu</title>
</head>

<body>
  <script type="text/javascript" charset="utf-8">
    //メイン画面
    const ui_menu_message = {};
    const ui_menu_data = [
      { id: "kairan", value: "今月の回覧板", color: "#3D41B3", icon: "mdi-home", width: 2, height: 2, x: 1, y: 1 },
      { id: "event", value: "イベント情報", color: "#703DB8", icon: "mdi-table-large", width: 2, x: 3, y: 1 },
      { id: "following", value: "生活便利帳", color: "#AC3DBE", icon: "mdi-share", width: 2, x: 3, y: 2 },
      { id: "help", value: "使い方", color: "#45B093", icon: "mdi-help-circle", width: 2, height: 2, x: 1, y: 3 },
      { id: "bousai", value: "安否確認", color: "#7B3C38", icon: "mdi-home-heart", width: 2, height: 2, x: 3, y: 3 },
    ];
    const ui_menu_logic = {
      init: function () {
        $$("ui_menu_oshirase").setHTML(marked.parse('## 会員の皆様へ\n\nこのたび、政府は、令和４年１月21日から、神奈川県への「まん延防止等重点措置」の適用を決定しました。\n\n圧倒的な感染力を持つオミクロン株によって、新規感染者は、わずかな期間で激増しています。\n\n自治会町内会の皆様におかれましては、これまでも基本的な感染対策にご協力いただいていますが、人混みは危険という意識を強く持ち、引き続き徹底してくださいますようお願いいたします。'));
      }
    };
    const ui_menu = {
      rows: [
        {
          view: "toolbar", cols: [
            { view: "label", label: "○○○○○○自治会へようこそ" },
            {
              view: "icon", icon: "mdi mdi-reload", align: "left", width: 50,
              on: {
                onItemClick: function () { location.reload(true) }
              }
            }
          ]
        },
        { view: "template", id: "ui_menu_oshirase", scroll: "auto" },
        {
          view: "winmenu", data: ui_menu_data, xCount: 4, yCount: 4, scroll: "auto",
          on: {
            onItemClick: function (id) {
              // webix.message(this.getItem(id).value);
              switch (id) {
                case "kairan":
                  window.open("https://www.city.yokohama.lg.jp/totsuka/shokai/rekishi/welcome.files/0017_20181022.pdf");
                  break;
                case "event":
                  $$("ui_event").show();
                  break;
                case "following":
                  window.open("./pdf/totsuka_life.pdf");
                  break;
                case "bousai":
                  $$("ui_bousai").show();
                  break;
                case "help":
                  $$("ui_help").show();
                  break;
                default:
                  break;
              }
            }
          }
        }
      ]
    };
    //イベント
    const ui_event_url = '<iframe src="https://calendar.google.com/calendar/embed?height=600&amp;wkst=1&amp;bgcolor=%23FFFFFF&amp;showTabs=0&amp;showTitle=0&amp;src=ja.japanese%23holiday%40group.v.calendar.google.com" style="border-width:0" width="100%" height="600" frameborder="0" scrolling="no"></iframe>';
    const ui_event = {
      view: "window", id: "ui_event", head: "イベント情報", close: true, fullscreen: true, modal: true,
      body: {
        rows: [
          {
            template: ui_event_url,
            scroll: "auto"
          },
          { view: "button", label: "閉じる", click: function (id, event) { $$("ui_event").hide() } }
        ]
      }
    };
    //安否確認
    const ui_bousai_url = '<iframe src="https://docs.google.com/forms/d/e/1FAIpQLSdDQwL-Uq2yZ25J3FspTnwoeX35sUc9wB6GFaeOUlfq8AT3bQ/viewform?embedded=true" width="100%" height="600" frameborder="0" marginheight="0" marginwidth="0">読み込んでいます…</iframe>';
    const ui_bousai = {
      view: "window", id: "ui_bousai", head: "安否確認", close: true, fullscreen: true, modal: true,
      body: {
        rows: [
          {
            template: ui_bousai_url,
            scroll: "auto"
          },
          { view: "button", label: "閉じる", click: function (id, event) { $$("ui_bousai").hide() } }
        ]
      }
    };
    //使い方
    const ui_help = {
      view: "window", id: "ui_help", head: "使い方", close: true, fullscreen: true, modal: true,
      body: {
        rows: [
          {
            template: marked.parse('## 使い方\n\n 「ホーム画面に追加」することで、スマホから便利に使用できます。\n\n [iphoneの場合] ![iphone例](./images/iphone.png "iphone例")\n\n [androidの場合] ![android例](./images/android.png "iphone例")'),
            scroll: "auto"
          },
          { view: "button", label: "閉じる", click: function (id, event) { $$("ui_help").hide() } }
        ]
      }
    };
    //メイン
    webix.ready(function () {
      //初期処理
      webix.ui.fullScreen();
      webix.i18n.setLocale("ja-JP");
      //サブ画面定義
      webix.ui(ui_event);
      webix.ui(ui_bousai);
      webix.ui(ui_help);
      //メイン画面
      webix.ui(ui_menu);
      ui_menu_logic.init();
    });
  </script>
</body>

</html>